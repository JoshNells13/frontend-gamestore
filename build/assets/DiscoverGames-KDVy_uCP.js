import{_ as g,l as x,q as k,c as r,a as t,t as i,n as c,F as C,m as D,b as B,p as w,r as d,h as G,i as $,o as u,f as N,g as S,k as V}from"./index-BKCWGQCp.js";const z={class:"list-form py-5"},A={class:"container"},E={class:"row align-items-center mb-4"},F={class:"col"},I={class:"mb-0"},L={class:"col-lg-8 text-lg-end mt-3 mt-lg-0"},M={class:"btn-group me-2",role:"group"},U={class:"btn-group",role:"group"},q={class:"row"},O={class:"card-body"},P={class:"row"},R={class:"col-4"},T=["src","alt"],j={class:"col"},H={class:"mb-1"},J={class:"text-muted"},K={class:"text-truncate-2"},Q={class:"text-muted small"},W={key:0,class:"spinner-border text-primary",role:"status"},X={key:1,class:"text-muted"},Y={__name:"DiscoverGames",setup(Z){const v=d([]),f=d(0),a=d(!1),l=d(!1),_=d(null),o=G({page:0,size:10,sortBy:"title",sortDir:"asc"});let m=null;const p=async(n=!1)=>{if(!(a.value||l.value&&!n)){a.value=!0,n&&(v.value=[],o.page=0,l.value=!1);try{const s=await w.get("/v1/games",{params:o}),b=s.data.content;b.length<o.size&&(l.value=!0),v.value=[...v.value,...b],f.value=s.data.totalElements,o.page++}catch(s){console.error("Failed to fetch games",s)}finally{a.value=!1}}},y=n=>{o.sortBy=n,p(!0)},h=n=>{o.sortDir=n,p(!0)};return x(()=>{p(),m=new IntersectionObserver(n=>{n[0].isIntersecting&&!a.value&&!l.value&&p()},{threshold:.1}),_.value&&m.observe(_.value)}),k(()=>{m&&m.disconnect()}),(n,s)=>{const b=$("router-link");return u(),r("main",null,[s[7]||(s[7]=t("div",{class:"hero py-5 bg-light"},[t("div",{class:"container text-center"},[t("h1",null,"Discover Games")])],-1)),t("div",z,[t("div",A,[t("div",E,[t("div",F,[t("h2",I,i(f.value)+" Game Available",1)]),t("div",L,[t("div",M,[t("button",{type:"button",class:c(["btn",o.sortBy==="popularity"?"btn-secondary":"btn-outline-primary"]),onClick:s[0]||(s[0]=e=>y("popularity"))},"Popularity",2),t("button",{type:"button",class:c(["btn",o.sortBy==="uploaddate"?"btn-secondary":"btn-outline-primary"]),onClick:s[1]||(s[1]=e=>y("uploaddate"))},"Recently Updated",2),t("button",{type:"button",class:c(["btn",o.sortBy==="title"?"btn-secondary":"btn-outline-primary"]),onClick:s[2]||(s[2]=e=>y("title"))},"Alphabetically",2)]),t("div",U,[t("button",{type:"button",class:c(["btn",o.sortDir==="asc"?"btn-secondary":"btn-outline-primary"]),onClick:s[3]||(s[3]=e=>h("asc"))},"ASC",2),t("button",{type:"button",class:c(["btn",o.sortDir==="desc"?"btn-secondary":"btn-outline-primary"]),onClick:s[4]||(s[4]=e=>h("desc"))},"DESC",2)])])]),t("div",q,[(u(!0),r(C,null,D(v.value,e=>(u(),r("div",{key:e.slug,class:"col-md-6 mb-3"},[N(b,{to:`/game/${e.slug}`,class:"card card-default h-100 text-decoration-none text-dark"},{default:S(()=>[t("div",O,[t("div",P,[t("div",R,[t("img",{src:e.thumbnail||"/example_game/v1/thumbnail.png",alt:e.title,class:"img-fluid rounded"},null,8,T)]),t("div",j,[t("h5",H,[V(i(e.title)+" ",1),t("small",J,"By "+i(e.author),1)]),t("div",K,i(e.description),1),s[5]||(s[5]=t("hr",{class:"mt-2 mb-2"},null,-1)),t("div",Q,"#scores submitted : "+i(e.scoreCount),1)])])])]),_:2},1032,["to"])]))),128))]),t("div",{ref_key:"sentinel",ref:_,class:"text-center py-4"},[a.value?(u(),r("div",W,[...s[6]||(s[6]=[t("span",{class:"visually-hidden"},"Loading...",-1)])])):l.value?(u(),r("div",X,"No more games to show")):B("",!0)],512)])])])}}},st=g(Y,[["__scopeId","data-v-3709f96e"]]);export{st as default};
